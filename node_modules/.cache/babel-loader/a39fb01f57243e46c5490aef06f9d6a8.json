{"ast":null,"code":"import _regeneratorRuntime from\"/home/groves/code/pp-react/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/groves/code/pp-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/groves/code/pp-react/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/home/groves/code/pp-react/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{useEffect,useState}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{makeStyles}from\"@material-ui/core/styles\";import Paper from\"@material-ui/core/Paper\";import emptyDriveway from\"../assets/images/emptydriveway.png\";import{Link}from\"react-router-dom\";import mapboxgl from\"!mapbox-gl\";// eslint-disable-line import/no-webpack-loader-syntax\nimport\"../css/DrivewayResults.css\";import{setSearchCoordinates}from\"../actions/search-actions\";import{dbDriveways}from\"../actions/db-driveways-actions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";mapboxgl.accessToken=\"pk.eyJ1Ijoid3N2b2JvZGEiLCJhIjoiY2txMTE1cGl2MDVmZzJvcXVibjViMGliaCJ9.13cxlIO8hYUtM1rQuvlbBw\";var useStyles=makeStyles(function(theme){return{root:{display:\"flex\",flexWrap:\"wrap\",\"& > *\":_defineProperty({margin:theme.spacing(1),width:theme.spacing(64),height:theme.spacing(12)},theme.breakpoints.only('xs'),{width:theme.spacing(42),height:theme.spacing(12)}),margin:\"auto\"}};});export default function DrivewayResults(){var searchCoordinates=useSelector(function(state){return state.searchCoordinates;});var dbDrivewayList=useSelector(function(state){return state.dbDrivewayList;});var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];var dispatch=useDispatch();var classes=useStyles();var getDrivewayData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,parsedData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://shrouded-cove-47330.herokuapp.com/api/driveways\",{method:\"GET\"});case 2:response=_context.sent;_context.next=5;return response.json();case 5:parsedData=_context.sent;dbDriveways(dispatch,parsedData);case 7:case\"end\":return _context.stop();}}},_callee);}));return function getDrivewayData(){return _ref.apply(this,arguments);};}();var getLocation=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,json,coords;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"https://api.mapbox.com/geocoding/v5/mapbox.places/\".concat(search,\".json?&access_token=pk.eyJ1Ijoid3N2b2JvZGEiLCJhIjoiY2txMTE1cGl2MDVmZzJvcXVibjViMGliaCJ9.13cxlIO8hYUtM1rQuvlbBw\"),{headers:{Accept:\"application/json\"}});case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:json=_context2.sent;coords=json.features[0].center;setSearchCoordinates(dispatch,coords);console.log(coords);case 9:case\"end\":return _context2.stop();}}},_callee2);}));return function getLocation(){return _ref2.apply(this,arguments);};}();var newLocation=function newLocation(){if(searchCoordinates[1]){var map=new mapboxgl.Map({container:\"map\",style:\"mapbox://styles/mapbox/streets-v11\",center:[searchCoordinates[0],searchCoordinates[1]],zoom:14});// eslint-disable-next-line\nvar marker1=new mapboxgl.Marker().setLngLat([searchCoordinates[0],searchCoordinates[1]]).addTo(map);}else{// eslint-disable-next-line\nvar map=new mapboxgl.Map({container:\"map\",style:\"mapbox://styles/mapbox/streets-v11\",center:[-84.4008875,33.755288],zoom:14.5});// eslint-disable-next-line\nvar _marker=new mapboxgl.Marker().setLngLat([-84.4008875,33.755288]).addTo(map);}var allPoints=dbDrivewayList.filter(function(dlist){return dlist.lat_long;}).map(function(point){return{type:\"Feature\",properties:{description:\"<strong>\".concat(point.address,\"</strong>\"),icon:\"veterinary-15\"},geometry:{type:\"Point\",coordinates:point.lat_long}};});map.on(\"load\",function(){map.addSource(\"places\",{type:\"geojson\",data:{type:\"FeatureCollection\",features:allPoints}});map.addLayer({id:\"places\",type:\"symbol\",source:\"places\",layout:{\"icon-image\":\"{icon}\",\"icon-allow-overlap\":true}});map.on(\"click\",\"places\",function(e){var coordinates=e.features[0].geometry.coordinates.slice();var description=e.features[0].properties.description;while(Math.abs(e.lngLat.lng-coordinates[0])>180){coordinates[0]+=e.lngLat.lng>coordinates[0]?360:-360;}new mapboxgl.Popup().setLngLat(coordinates).setHTML(description).addTo(map);});map.on(\"mouseenter\",\"places\",function(){map.getCanvas().style.cursor=\"pointer\";});map.on(\"mouseleave\",\"places\",function(){map.getCanvas().style.cursor=\"\";});});};var submitNewLocation=function submitNewLocation(e){e.preventDefault();getLocation();setSearch(\"\");};useEffect(function(){getDrivewayData();// eslint-disable-next-line\n},[searchCoordinates]);useEffect(function(){newLocation();// eslint-disable-next-line\n},[dbDrivewayList]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"driveway-results-div\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitNewLocation,className:\"results-search-bar\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"results-search-input\",type:\"search\",placeholder:\"Going somewhere else?\",value:search,onChange:function onChange(e){return setSearch(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"button\",{id:\"results-search-button\",children:\"Search\"})]}),/*#__PURE__*/_jsx(\"h1\",{children:\"Search Results\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"results-and-map\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"search-results\",children:dbDrivewayList.length>1?dbDrivewayList.map(function(driveway){return/*#__PURE__*/_jsx(\"div\",{className:classes.root,children:/*#__PURE__*/_jsx(Paper,{elevation:3,children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-contents\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pic-and-address\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"driveway-pic\",src:emptyDriveway,alt:\"driveway\"}),/*#__PURE__*/_jsx(\"h2\",{children:driveway.address})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"price-and-link\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"$\",driveway.rate,\" / hour\"]}),/*#__PURE__*/_jsx(Link,{to:\"/driveway/\".concat(driveway.id),children:\"View More\"})]})]})})});}):/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})}),/*#__PURE__*/_jsx(\"div\",{id:\"map\"})]})]})});}","map":{"version":3,"sources":["/home/groves/code/pp-react/src/components/DrivewayResults.jsx"],"names":["React","useEffect","useState","useSelector","useDispatch","makeStyles","Paper","emptyDriveway","Link","mapboxgl","setSearchCoordinates","dbDriveways","accessToken","useStyles","theme","root","display","flexWrap","margin","spacing","width","height","breakpoints","only","DrivewayResults","searchCoordinates","state","dbDrivewayList","search","setSearch","dispatch","classes","getDrivewayData","fetch","method","response","json","parsedData","getLocation","headers","Accept","coords","features","center","console","log","newLocation","map","Map","container","style","zoom","marker1","Marker","setLngLat","addTo","allPoints","filter","dlist","lat_long","point","type","properties","description","address","icon","geometry","coordinates","on","addSource","data","addLayer","id","source","layout","e","slice","Math","abs","lngLat","lng","Popup","setHTML","getCanvas","cursor","submitNewLocation","preventDefault","target","value","length","driveway","rate"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport emptyDriveway from \"../assets/images/emptydriveway.png\";\nimport { Link } from \"react-router-dom\";\nimport mapboxgl from \"!mapbox-gl\"; // eslint-disable-line import/no-webpack-loader-syntax\nimport \"../css/DrivewayResults.css\";\nimport { setSearchCoordinates } from \"../actions/search-actions\";\nimport { dbDriveways } from \"../actions/db-driveways-actions\";\n\nmapboxgl.accessToken =\n\t\"pk.eyJ1Ijoid3N2b2JvZGEiLCJhIjoiY2txMTE1cGl2MDVmZzJvcXVibjViMGliaCJ9.13cxlIO8hYUtM1rQuvlbBw\";\n\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\tdisplay: \"flex\",\n\t\tflexWrap: \"wrap\",\n\t\t\"& > *\": {\n\t\t\tmargin: theme.spacing(1),\n\t\t\twidth: theme.spacing(64),\n\t\t\theight: theme.spacing(12),\n\t\t\t[theme.breakpoints.only('xs')]: {\n\t\t\t\twidth: theme.spacing(42),\n\t\t\t\theight: theme.spacing(12),\n\t\t\t  },\n\t\t},\n\t\tmargin: \"auto\",\n\t\t\n\t},\n}));\n\nexport default function DrivewayResults() {\n\tconst searchCoordinates = useSelector((state) => state.searchCoordinates);\n\tconst dbDrivewayList = useSelector((state) => state.dbDrivewayList);\n\tconst [search, setSearch] = useState(\"\");\n\tconst dispatch = useDispatch();\n\tconst classes = useStyles();\n\n\tconst getDrivewayData = async () => {\n\t\tconst response = await fetch(\"https://shrouded-cove-47330.herokuapp.com/api/driveways\", {\n\t\t\tmethod: \"GET\",\n\t\t});\n\t\tconst parsedData = await response.json();\n\t\tdbDriveways(dispatch, parsedData);\n\t};\n\n\tconst getLocation = async () => {\n\t\tconst response = await fetch(\n\t\t\t`https://api.mapbox.com/geocoding/v5/mapbox.places/${search}.json?&access_token=pk.eyJ1Ijoid3N2b2JvZGEiLCJhIjoiY2txMTE1cGl2MDVmZzJvcXVibjViMGliaCJ9.13cxlIO8hYUtM1rQuvlbBw`,\n\t\t\t{\n\t\t\t\theaders: { Accept: \"application/json\" },\n\t\t\t}\n\t\t);\n\t\tconst json = await response.json();\n\t\tconst coords = json.features[0].center;\n\t\tsetSearchCoordinates(dispatch, coords);\n\t\tconsole.log(coords);\n\t};\n\n\tconst newLocation = () => {\n\t\tif (searchCoordinates[1]) {\n\t\t\tvar map = new mapboxgl.Map({\n\t\t\t\tcontainer: \"map\",\n\t\t\t\tstyle: \"mapbox://styles/mapbox/streets-v11\",\n\t\t\t\tcenter: [searchCoordinates[0], searchCoordinates[1]],\n\t\t\t\tzoom: 14,\n\t\t\t});\n\t\t\t// eslint-disable-next-line\n\t\t\tlet marker1 = new mapboxgl.Marker()\n\t\t\t\t.setLngLat([searchCoordinates[0], searchCoordinates[1]])\n\t\t\t\t.addTo(map);\n\t\t} else {\n\t\t\t// eslint-disable-next-line\n\t\t\tvar map = new mapboxgl.Map({\n\t\t\t\tcontainer: \"map\",\n\t\t\t\tstyle: \"mapbox://styles/mapbox/streets-v11\",\n\t\t\t\tcenter: [-84.4008875, 33.755288],\n\t\t\t\tzoom: 14.5,\n\t\t\t});\n\t\t\t// eslint-disable-next-line\n\t\t\tlet marker1 = new mapboxgl.Marker()\n\t\t\t\t.setLngLat([-84.4008875, 33.755288])\n\t\t\t\t.addTo(map);\n\t\t}\n\t\tconst allPoints = dbDrivewayList\n\t\t\t.filter((dlist) => dlist.lat_long)\n\t\t\t.map((point) => ({\n\t\t\t\ttype: \"Feature\",\n\t\t\t\tproperties: {\n\t\t\t\t\tdescription: `<strong>${point.address}</strong>`,\n\t\t\t\t\ticon: \"veterinary-15\",\n\t\t\t\t},\n\t\t\t\tgeometry: {\n\t\t\t\t\ttype: \"Point\",\n\t\t\t\t\tcoordinates: point.lat_long,\n\t\t\t\t},\n\t\t\t}));\n\t\tmap.on(\"load\", function () {\n\t\t\tmap.addSource(\"places\", {\n\t\t\t\ttype: \"geojson\",\n\t\t\t\tdata: {\n\t\t\t\t\ttype: \"FeatureCollection\",\n\t\t\t\t\tfeatures: allPoints,\n\t\t\t\t},\n\t\t\t});\n\t\t\tmap.addLayer({\n\t\t\t\tid: \"places\",\n\t\t\t\ttype: \"symbol\",\n\t\t\t\tsource: \"places\",\n\t\t\t\tlayout: {\n\t\t\t\t\t\"icon-image\": \"{icon}\",\n\t\t\t\t\t\"icon-allow-overlap\": true,\n\t\t\t\t},\n\t\t\t});\n\t\t\tmap.on(\"click\", \"places\", function (e) {\n\t\t\t\tvar coordinates = e.features[0].geometry.coordinates.slice();\n\t\t\t\tvar description = e.features[0].properties.description;\n\n\t\t\t\twhile (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n\t\t\t\t\tcoordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n\t\t\t\t}\n\n\t\t\t\tnew mapboxgl.Popup()\n\t\t\t\t\t.setLngLat(coordinates)\n\t\t\t\t\t.setHTML(description)\n\t\t\t\t\t.addTo(map);\n\t\t\t});\n\n\t\t\tmap.on(\"mouseenter\", \"places\", function () {\n\t\t\t\tmap.getCanvas().style.cursor = \"pointer\";\n\t\t\t});\n\n\t\t\tmap.on(\"mouseleave\", \"places\", function () {\n\t\t\t\tmap.getCanvas().style.cursor = \"\";\n\t\t\t});\n\t\t});\n\t};\n\n\tconst submitNewLocation = (e) => {\n\t\te.preventDefault();\n\t\tgetLocation();\n\t\tsetSearch(\"\");\n\t};\n\n\t\n\n\tuseEffect(() => {\n\t\tgetDrivewayData();\n\t\t// eslint-disable-next-line\n\t}, [searchCoordinates]);\n\tuseEffect(() => {\n\t\tnewLocation();\n\t\t// eslint-disable-next-line\n\t}, [dbDrivewayList]);\n\n\treturn (\n\t\t<div>\n\t\t\t<div className=\"driveway-results-div\">\n\t\t\t\t<form onSubmit={submitNewLocation} className=\"results-search-bar\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"results-search-input\"\n\t\t\t\t\t\ttype=\"search\"\n\t\t\t\t\t\tplaceholder=\"Going somewhere else?\"\n\t\t\t\t\t\tvalue={search}\n\t\t\t\t\t\tonChange={(e) => setSearch(e.target.value)}\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<button id=\"results-search-button\">Search</button>\n\t\t\t\t</form>\n\t\t\t\t<h1>Search Results</h1>\n\t\t\t\t<div className=\"results-and-map\">\n\t\t\t\t\t<div className=\"search-results\">\n\t\t\t\t\t\t{dbDrivewayList.length > 1 ? (\n\t\t\t\t\t\t\tdbDrivewayList.map((driveway) => (\n\t\t\t\t\t\t\t\t<div className={classes.root}>\n\t\t\t\t\t\t\t\t\t<Paper elevation={3}>\n\t\t\t\t\t\t\t\t\t\t<div className=\"card-contents\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"pic-and-address\">\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"driveway-pic\"\n\t\t\t\t\t\t\t\t\t\t\tsrc={emptyDriveway}\n\t\t\t\t\t\t\t\t\t\t\talt=\"driveway\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<h2>{driveway.address}</h2>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"price-and-link\">\n\t\t\t\t\t\t\t\t\t\t<h4>${driveway.rate} / hour</h4>\n\t\t\t\t\t\t\t\t\t\t<Link to={`/driveway/${driveway.id}`}>View More</Link></div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<p>Loading...</p>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"map\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}