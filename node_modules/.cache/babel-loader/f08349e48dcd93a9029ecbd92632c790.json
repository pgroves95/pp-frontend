{"ast":null,"code":"import _slicedToArray from\"/home/groves/code/pp-react/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/home/groves/code/pp-react/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{useState,useEffect}from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import{useSelector,useDispatch}from\"react-redux\";import{showOneDriveway}from\"../actions/one-driveway-actions\";import{getLoginStatus}from\"../actions/login-actions\";import{Link,useHistory}from\"react-router-dom\";import Paper from\"@material-ui/core/Paper\";import\"../css/DrivewayIndividual.css\";import emptyDriveway from\"../assets/images/emptydriveway.png\";import sad from\"../assets/images/lostdog.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{display:\"flex\",flexWrap:\"wrap\",\"& > *\":_defineProperty({margin:theme.spacing(1),width:theme.spacing(32),height:theme.spacing(36),paddingTop:\"5%\"},theme.breakpoints.between('xs','sm'),{width:theme.spacing(28),height:theme.spacing(36)}),margin:\"auto\"}};});export default function DrivewayIndividual(_ref){var match=_ref.match;var classes=useStyles();var dispatch=useDispatch();var dbDrivewayList=useSelector(function(state){return state.dbDrivewayList;});var oneDriveway=useSelector(function(state){return state.oneDriveway;});var profileData=useSelector(function(state){return state.profileData;});var drivewayNumber=parseInt(match.params.id);var history=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),date=_useState2[0],setDate=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),end_req=_useState4[0],setEnd_req=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),start_req=_useState6[0],setStart_req=_useState6[1];useEffect(function(){var getDriveway=function getDriveway(){var drivewayToShow=dbDrivewayList.filter(function(driveway){return driveway.id===drivewayNumber;});showOneDriveway(dispatch,drivewayToShow);};getDriveway();},[]);var handleYOSubmit=function handleYOSubmit(e){e.preventDefault();fetch(\"https://shrouded-cove-47330.herokuapp.com/api/reservations/new\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({date:date,driveway_id:oneDriveway[0].id,end_req:end_req,start_req:start_req,stripe_charge_id:null,user_id:profileData.id})}).then(function(res){return res.json();}).then(function(data){if(data.message){history.push(\"/login\");getLoginStatus(dispatch,\"Please login to reserve driveways\");}else{history.push(\"/profile\");}});return false;};return/*#__PURE__*/_jsx(\"div\",{className:\"individual-drive\",children:oneDriveway[0]===undefined?/*#__PURE__*/_jsxs(\"div\",{id:\"reroute-link\",children:[/*#__PURE__*/_jsx(Link,{to:\"/searchresults\",children:\"Something went wrong! Click here to return to the search page and try again\"}),/*#__PURE__*/_jsx(\"img\",{id:\"sad-dog-img\",src:sad,alt:\"sad-puppy\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title\",children:[/*#__PURE__*/_jsx(\"h1\",{children:oneDriveway[0].address}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Link,{to:\"/searchresults\",children:\"Return to Search Results\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-and-reserve\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pic-and-desc\",children:[/*#__PURE__*/_jsx(\"img\",{src:emptyDriveway,alt:\"driveway\"}),/*#__PURE__*/_jsx(\"p\",{children:oneDriveway[0].description})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.root,children:/*#__PURE__*/_jsxs(Paper,{elevation:3,children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"$\",oneDriveway[0].rate,\" / hr\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return handleYOSubmit(e);},children:[/*#__PURE__*/_jsx(\"p\",{children:\"Date:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"date\",type:\"date\",required:true,onChange:function onChange(e){return setDate(e.target.value);}}),/*#__PURE__*/_jsx(\"p\",{children:\"Drop Off:\"}),/*#__PURE__*/_jsx(\"input\",{step:\"900\",name:\"start_req\",type:\"time\",required:true,onChange:function onChange(e){return setStart_req(e.target.value);}}),/*#__PURE__*/_jsx(\"p\",{children:\"Pick Up:\"}),/*#__PURE__*/_jsx(\"input\",{step:\"900\",name:\"end_req\",type:\"time\",required:true,onChange:function onChange(e){return setEnd_req(e.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"driveway_id\",value:oneDriveway[0].id}),/*#__PURE__*/_jsx(\"button\",{id:\"reserve-button\",children:\"Reserve\"})]})]})})]}),\" \"]})});}","map":{"version":3,"sources":["/home/groves/code/pp-react/client/src/components/DrivewayIndividual.jsx"],"names":["React","useState","useEffect","makeStyles","useSelector","useDispatch","showOneDriveway","getLoginStatus","Link","useHistory","Paper","emptyDriveway","sad","useStyles","theme","root","display","flexWrap","margin","spacing","width","height","paddingTop","breakpoints","between","DrivewayIndividual","match","classes","dispatch","dbDrivewayList","state","oneDriveway","profileData","drivewayNumber","parseInt","params","id","history","date","setDate","end_req","setEnd_req","start_req","setStart_req","getDriveway","drivewayToShow","filter","driveway","handleYOSubmit","e","preventDefault","fetch","method","headers","body","JSON","stringify","driveway_id","stripe_charge_id","user_id","then","res","json","data","message","push","undefined","address","description","rate","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {showOneDriveway} from \"../actions/one-driveway-actions\"\nimport {getLoginStatus} from \"../actions/login-actions\"\nimport { Link, useHistory } from \"react-router-dom\";\nimport Paper from \"@material-ui/core/Paper\";\nimport \"../css/DrivewayIndividual.css\";\nimport emptyDriveway from \"../assets/images/emptydriveway.png\";\nimport sad from \"../assets/images/lostdog.png\"\n\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\tdisplay: \"flex\",\n\t\tflexWrap: \"wrap\",\n\t\t\"& > *\": {\n\t\t\tmargin: theme.spacing(1),\n\t\t\twidth: theme.spacing(32),\n\t\t\theight: theme.spacing(36),\n\t\t\tpaddingTop: \"5%\",\n\t\t\t[theme.breakpoints.between('xs', 'sm')]: {\n\t\t\t\twidth: theme.spacing(28),\n\t\t\t\theight: theme.spacing(36),\n\t\t\t  },\n\t\t},\n\t\tmargin: \"auto\",\n\t},\n}));\n\nexport default function DrivewayIndividual({ match }) {\n\tconst classes = useStyles();\n\tconst dispatch = useDispatch();\n\tconst dbDrivewayList = useSelector((state) => state.dbDrivewayList)\n\tconst oneDriveway = useSelector((state) => state.oneDriveway)\n\tconst profileData = useSelector((state) => state.profileData)\n\tconst drivewayNumber = parseInt(match.params.id)\n\tconst history = useHistory();\n\tconst [date,setDate] = useState(\"\")\n\tconst [end_req,setEnd_req] = useState(\"\")\n\tconst [start_req,setStart_req] = useState(\"\")\n\n\tuseEffect(() => {\n\t\tconst getDriveway = () => {\n\t\t  const drivewayToShow = dbDrivewayList.filter((driveway) => driveway.id === drivewayNumber);\n\t\t  showOneDriveway(dispatch, drivewayToShow);\n\t\t};\n\t\tgetDriveway();\n\t}, []);\n\n\tconst handleYOSubmit = (e) => {\n\t\te.preventDefault();\n\t\tfetch(\"https://shrouded-cove-47330.herokuapp.com/api/reservations/new\", {\n\t\t\tmethod: \"POST\",\n\t\t\t\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tdate,\n\t\t\t\tdriveway_id: oneDriveway[0].id,\n\t\t\t\tend_req,\n\t\t\t\tstart_req,\n\t\t\t\tstripe_charge_id: null,\n\t\t\t\tuser_id: profileData.id,\n\t\t\t}),\n\n\t\t})\n\t\t\t.then((res) => res.json())\n\t\t\t.then((data) => {\n\t\t\t\tif (data.message) {\n\t\t\t\t\thistory.push(\"/login\");\n\t\t\t\t\tgetLoginStatus(dispatch, \"Please login to reserve driveways\")\n\t\t\t\t} else {\n\t\t\t\t\thistory.push(\"/profile\");\n\t\t\t\t}\n\t\t\t});\n\t\treturn false;\n\t};\n\t\n\n\treturn (\n\t\t<div className=\"individual-drive\">\n\t\t\t{oneDriveway[0] === undefined ? <div id=\"reroute-link\"><Link to=\"/searchresults\">Something went wrong! Click here to return to the search page and try again</Link><img id=\"sad-dog-img\" src={sad} alt=\"sad-puppy\"/></div> : \n\t\t\t<div>\n\t\t\t <div className=\"title\">\n\t\t\t\t<h1>{oneDriveway[0].address}</h1>\n\t\t\t\t<p><Link to=\"/searchresults\">Return to Search Results</Link></p>\n\t\t\t</div>\n\t\t\t<div className=\"info-and-reserve\">\n\t\t\t\t<div className=\"pic-and-desc\">\n\t\t\t\t\t<img src={emptyDriveway} alt=\"driveway\" />\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{oneDriveway[0].description}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<div className={classes.root}>\n\t\t\t\t\t<Paper elevation={3}>\n\t\t\t\t\t\t<h2>${oneDriveway[0].rate} / hr</h2>\n\t\t\t\t\t\t<br></br>\n\t\t\t\t\t\t<form onSubmit={(e) => handleYOSubmit(e)} >\n\t\t\t\t\t\t\t<p>Date:</p>\n\t\t\t\t\t\t\t<input name=\"date\" type=\"date\" required onChange={(e) => setDate(e.target.value)}/>\n\t\t\t\t\t\t\t<p>Drop Off:</p>\n\t\t\t\t\t\t\t<input step=\"900\" name=\"start_req\" type=\"time\" required onChange={(e) => setStart_req(e.target.value)}/>\n\t\t\t\t\t\t\t<p>Pick Up:</p>\n\t\t\t\t\t\t\t<input step=\"900\" name=\"end_req\" type=\"time\" required onChange={(e) => setEnd_req(e.target.value)}/>\n\t\t\t\t\t\t\t<br></br>\n\t\t\t\t\t\t\t<br></br>\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"driveway_id\" value={oneDriveway[0].id} />\n\t\t\t\t\t\t\t<button id=\"reserve-button\">Reserve</button>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</Paper>\n\t\t\t\t</div>\n\t\t\t</div> </div>}\n\t\t</div>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}